<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DocHub</title>

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="css/review.css">
    <!-- <link rel="stylesheet" href="css/styles.css"> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"> </script>
    <script src="js/component.js"></script>
    <script src="js/tools.js"> </script>
    <script src="js/slider.js"></script>
</head>

<body>
    <div id="header"></div>
    <script>
        $("#header").html(headerHTML)
    </script>
    <div id="container" style="width: 100%;" class="flex-column">
        <div class="flex-column" id="basic-info" style="width: 80%;">
            <div class="header title" id="name"></div>
            <div class="flex-row" style="width: 50%;">
                <div>Start Time: </div>
                <div id="start_time">Null</div>
                <div>End Time: </div>
                <div id="end_time">Null</div>
            </div>
            <div class="flex-row" style="width: 30%;">
                <div>Patient: </div>
                <div id="patient_id">Null</div>
            </div>
            <div class="flex-row">
                <div class="label">Comment</div>
                <textarea type="text" id="comment" style="width: 80%;"></textarea>
            </div>
        </div>
        <div class="container s1" style="margin-top: 2rem;">
                <div class = "flex-row">
                        <form class = "col">
    
                           <div class = "row">
                              <select class = "browser-default">
                                 <option value = ""  selected>Select Doctor</option>
                                 <option value = "1">Timmo</option>
                                 <option value = "2">Anna</option>
                                 <option value = "3">Marco</option>
                              </select>
    
                            <button class="col s12 btn btn-small waves-effect indigo ">Add Co-Doctor</button>
    
                           </div>
                        </form>  
                        <p class="right-align">
                        <a class="waves-effect waves-light btn-large indigo"><i class="material-icons right">accessibility_new</i>Ask for help</a>
                        </p>           
                </div>
        </div>
        <div id="review-table" style="width:90%;">
            <div class="carousel-content" id="carousel-content">
                <div>
                    <div class="sub-title">JSu-IM103</div>
                    <table style="width:100%">
                        <tr>
                            <th>Doctor</th>
                            <th>ORGAN CONTOUR</th>
                            <th>DOSE DEVIATION</th>
                            <th>GEOMETRIES DEVIATION</th>
                            <th>MONITOR UNITS</th>
                            <th>DOSE DISTRIBUTION</th>
                            <th>CRITICAL ORGAN METRICS</th>
                            <th>OPTIMALITY</th>
                            <th>ROBUSTNESS</th>
                            <th>SAFETY</th>
                            <th>FINAL CHOOSE</th>
                        </tr>
                        <tr id="creator-row">
                            <td class="doctor-head">Anna</td>
                            <td bgcolor="#ee6e73"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#ffff80"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#99e699"></td>
                            <td><input type="checkbox" name="" checked class="checkbox"/></td>
                        </tr>
                        <tr id="creator-row">
                            <td class="doctor-head">Timmo</td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"><input type="checkbox" class="checkbox" readonly/>&nbsp;</td>
                        </tr>
                        <tr id="creator-row">
                            <td class="doctor-head">Marco</td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#ffffff"></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="carousel-content" id="carousel-content">
                <div>
                    <div class="sub-title">JSu-IM105</div>
                    <table style="width:100%">
                        <tr>
                            <th>Doctor</th>
                            <th>ORGAN CONTOUR</th>
                            <th>DOSE DEVIATION</th>
                            <th>GEOMETRIES DEVIATION</th>
                            <th>MONITOR UNITS</th>
                            <th>DOSE DISTRIBUTION</th>
                            <th>CRITICAL ORGAN METRICS</th>
                            <th>OPTIMALITY</th>
                            <th>ROBUSTNESS</th>
                            <th>SAFETY</th>
                            <th>FINAL CHOOSE</th>
                        </tr>
                        <tr id="creator-row">
                            <td class="doctor-head">Anna</td>
                            <td bgcolor="#ee6e73"></td>
                            <td bgcolor="#ee6e73"></td>
                            <td bgcolor="#ee6e73"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#99e699"></td>
                            <td ><input type="checkbox" name="" class="checkbox" />&nbsp;</td>
                        </tr>
                        <tr id="creator-row">
                            <td class="doctor-head">Timmo</td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"></td>
                            <td bgcolor="#e6e6e6"><input type="checkbox" name="" class="checkbox" readonly/>&nbsp;</td>
                        </tr>
                        <tr id="creator-row">
                            <td class="doctor-head">Marco</td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#99e699"></td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#ffffff"></td>
                            <td bgcolor="#ffffff"></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <button class="hidden" id="accept-btn">Accept Plan</button>
    </div>
    <script>
        var reviewId = getUrlVars()["id"]
        // basic info
        var reviewJson = request_api(dochub_api + "reviews/" + reviewId + "/", null, "GET")
        $("#name").text(reviewJson.name)
        $("#start_time").text(reviewJson.start_time)
        if (reviewJson.end_time != null)
            $("#end_time").text(reviewJson.end_time)
        $("#patient_id").text(reviewJson.patient_id)
        $("#comment").val(reviewJson.comment)
        // table
        // var plan_carousel = $("#carousel-content")
        // var plans = request_api(varian_api + "patients/" + reviewJson.patient_id + "/plans", null, "GET")
        // plans.forEach(plan => {
        //     var html = $(review_plan_html)
        //     html.attr("planId", plan)
        //     console.log(html)
        //     plan_carousel.append(html)
        // })
        // var tasks = request_api(dochub_api + "tasks/review/" + reviewId, null, "GET")
        // tasks.forEach(task => {
        //     var table = $("[planId=" + task.plan_id + "]")

        // });
        // button
        var active = getUrlVars()["active"]
        var btn = $("#accept-btn")
        if (active != null && active == "false" || active == "0") {
            btn.attr("class", "hidden")
        } else {
            btn.attr("class", "")
        }
    </script>
</body>

</html>